<div
  cdkDrag
  class="group relative border rounded-xl bg-white shadow-sm overflow-hidden
         cursor-pointer transition mb-8"
  (click)="select()"
  [class.ring-2]="isSelected()"
  [class.ring-primary]="isSelected()"
>

  <!-- DRAG HANDLE -->
  <div
    cdkDragHandle
    class="absolute -left-4 top-4 w-8 h-8 bg-primary text-white rounded-full
           flex items-center justify-center cursor-grab shadow-md
           opacity-0 group-hover:opacity-100 transition"
    (click)="$event.stopPropagation()"
  >
    ☰
  </div>

  <!-- ACTIONS -->
  @if (isSelected()) {
    <div
      class="absolute -right-2 top-2 flex flex-col gap-1 bg-white border
             rounded-lg shadow p-1 z-30"
      (click)="$event.stopPropagation()"
    >

      <button
        class="px-2 py-1 text-xs hover:bg-gray-100 rounded"
        (click)="builder.moveUp(section)"
      >
        ↑
      </button>

      <button
        class="px-2 py-1 text-xs hover:bg-gray-100 rounded"
        (click)="builder.moveDown(section)"
      >
        ↓
      </button>

      <button
        class="px-2 py-1 text-xs hover:bg-gray-100 rounded"
        (click)="builder.duplicateSection(section)"
      >
        ⧉
      </button>

      <button
        class="px-2 py-1 text-xs text-red-600 hover:bg-red-50 rounded"
        (click)="builder.deleteSection(section)"
      >
        ✕
      </button>

    </div>
  }

  <!-- CONTENT -->
  <div class="cursor-default">
    <ng-content></ng-content>
  </div>

</div>
